<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MedStudyeasy ‚Äì Notes & PYQ</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
<style>
  :root{
    --primary:#2a5c8f;--secondary:#4caf50;--accent:#ff6b6b;
    --bg:#f6f8fb;--card:#fff;--text:#222;--muted:#777;
    --shadow:0 8px 24px rgba(0,0,0,.08);
  }
  *{box-sizing:border-box}
  html,body{margin:0}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.5}
  header{position:sticky;top:0;z-index:50;background:linear-gradient(120deg,var(--primary),#1c3961);color:#fff;box-shadow:var(--shadow)}
  .wrap{max-width:1100px;margin:auto;padding:0 16px}
  .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
  .brand{display:flex;gap:10px;align-items:center}
  .brand i{font-size:28px}
  .brand b{font-size:20px;letter-spacing:.3px}
  /* hero */
  .hero{padding:24px 0 8px}
  .hero h1{margin:.2rem 0 .4rem;font-size:28px}
  .hero p{margin:0;color:#e6eefb}
  /* AI Button */
  .ai-btn {
    padding:14px 28px;
    font-size:18px;
    margin-top:16px;
    background:#ff6b6b;
    color:white;
    border:none;
    border-radius:10px;
    cursor:pointer;
    font-weight:bold;
    display:inline-block;
    text-align:center;
    transition: transform 0.2s, background 0.2s;
    text-decoration: none;
  }
  .ai-btn:hover {
    background:#ff5252;
    transform: scale(1.05);
  }
  @media (max-width:480px){
    .ai-btn {
      width:100%;
      font-size:20px;
      padding:16px 0;
      margin-top:20px;
    }
  }
  /* tabs */
  .tabs{margin:20px auto 0;background:var(--card);border-radius:14px;padding:14px;box-shadow:var(--shadow)}
  .tab-bar{display:flex;gap:10px;flex-wrap:wrap}
  .tab-btn{flex:1 1 160px;background:#eef4fb;border-radius:10px;padding:10px 14px;border:0;font-weight:700;color:#16406e;cursor:pointer}
  .tab-btn.active{background:var(--primary);color:#fff}
  .top-row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-top:12px}
  .search{flex:1 1 260px;display:flex;border:1px solid #dde6f2;background:#f2f6fb;border-radius:10px;overflow:hidden}
  .search input{flex:1;padding:10px 12px;border:0;background:transparent}
  .search button{border:0;background:var(--secondary);color:#fff;padding:0 14px;cursor:pointer}
  .year-row{display:flex;gap:8px;flex-wrap:wrap}
  .pill{border:1px solid #d9e4f2;background:#fff;padding:8px 12px;border-radius:999px;cursor:pointer}
  .pill.active{background:#1f4f83;color:#fff;border-color:#1f4f83}
  /* grid */
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px;margin-top:14px}
  .card{background:var(--card);border-radius:12px;box-shadow:var(--shadow);padding:14px;display:flex;flex-direction:column;gap:10px}
  .card h3{margin:0;font-size:16px}
  .sub-list{display:flex;flex-direction:column;gap:8px}
  .sub{display:flex;align-items:center;gap:10px;justify-content:space-between;border:1px dashed #e6ecf4;border-radius:10px;padding:10px}
  .sub .left{display:flex;align-items:center;gap:10px}
  .tag{font-size:12px;background:#eef4fb;color:#16406e;border-radius:999px;padding:4px 8px}
  .acts{display:flex;gap:6px}
  .icon-btn{border:0;padding:8px 10px;border-radius:8px;cursor:pointer;background:#f2f6fb}
  .icon-btn.view{background:#eaf2ff;color:#184a85}
  .muted{color:var(--muted);font-size:12px}
  /* modal */
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:16px;z-index:200}
  .modal.show{display:flex}
  .dialog{background:#fff;max-width:640px;width:100%;border-radius:12px;padding:18px;box-shadow:var(--shadow);max-height:80vh;overflow:auto}
  .dialog h3{margin:0 0 10px}
  .dialog .close{float:right;cursor:pointer;color:#999}
  .pyq-paper{margin:10px 0;padding:8px;border-radius:8px;background:#f6fbff;border:1px solid #e7f0fb}
  .pyq-year{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin:6px 0}
  .btn-link{display:inline-block;padding:6px 10px;border-radius:8px;color:#fff;text-decoration:none;font-weight:700;font-size:13px;margin-right:6px}
  .btn-summer{background:var(--secondary)}
  .btn-winter{background:var(--primary)}
  .btn-disabled{display:inline-block;padding:6px 10px;border-radius:8px;background:#efefef;color:#999;font-weight:700;font-size:13px;margin-right:6px}
  /* footer */
  footer{color:#fff;background:#0f1c2c;margin-top:26px}
  footer .wrap{padding:16px}
  /* small screens: modal comfortable */
  @media (max-width:480px){
    .dialog{padding:14px}
    .btn-link{padding:6px 8px;font-size:12px}
  }
</style>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1751053028345383"
     crossorigin="anonymous"></script>
</head>
<body>
  <header>
  <div class="wrap nav">
    <div class="brand"><i class="fa-solid fa-book-medical"></i><b>MedStudyeasy</b></div>
  </div>
  <div class="wrap hero">
    <h1>Notes & Previous Year Question Papers</h1>
    <p>Browse by year, filter by subject, and preview resources.</p>
    <p>(Note- kindly install google drive app on your device for smooth experience.)</p>

    <!-- AI Tutor Button - Fixed structure -->
    <a href="ai.html" class="ai-btn">
      üßë‚Äç‚öïÔ∏è Try Med AI Tutor
    </a>
  </div>
</header>

  <main class="wrap">
    <!-- Tabs -->
    <section class="tabs" id="app">
      <div class="tab-bar">
        <button class="tab-btn active" data-tab="notes"><i class="fa-solid fa-note-sticky"></i> Notes</button>
        <button class="tab-btn" data-tab="pyq"><i class="fa-solid fa-file-lines"></i> PYQ</button>
      </div>

      <div class="top-row">
        <div class="search">
          <input id="searchBox" placeholder="Search subjects‚Ä¶" />
          <button id="clearSearch" title="Clear"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div class="year-row" id="yearRow">
          <span class="pill active" data-year="1">1st Year</span>
          <span class="pill" data-year="2">2nd Year</span>
          <span class="pill" data-year="3">3rd Year</span>
          <span class="pill" data-year="4">4th Year</span>
        </div>
      </div>

      <div class="grid" id="cardsGrid"></div>
      <div style="margin-top:8px">
        <div class="muted">Showing <span id="count">0</span> subjects</div>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <span class="close" id="modalClose" title="Close"><i class="fa-solid fa-xmark"></i></span>
      <h3 id="modalTitle">Title</h3>
      <div id="modalBody"></div>
    </div>
  </div>

  <footer><a href="ai.html">
  <button style="padding:10px 20px; font-size:16px; margin:10px; background:#2a5c8f; color:white; border:none; border-radius:5px; cursor:pointer;">
    üßë‚Äç‚öïÔ∏è Try Med AI Tutor
  </button>
</a>

<!-- Visitor Counter Start -->
<div id="visitor-counter" style="text-align: center; margin: 20px 0;">
  <span style="font-size: 16px; font-weight: bold;">Visitor Count:</span>
  <span id="visit-count" style="font-size: 16px; color: #333;">0</span>
</div>

<script>
  (function(){
    // Use your GitHub Pages site as namespace & key
    const namespace = "bharathuse21-bit.github.io";
    const key = "site-visits";

    // The fetch to increment & get the count
    fetch(`https://api.countapi.xyz/hit/${namespace}/${key}`)
      .then(response => response.json())
      .then(data => {
        if(data && data.value !== undefined){
          document.getElementById("visit-count").textContent = data.value;
        } else {
          console.error("CountAPI: Unexpected response", data);
        }
      })
      .catch(err => {
        console.error("CountAPI Error:", err);
      });
  })();
</script>
<!-- Visitor Counter End -->
    <div class="wrap">
      <small>&copy; <span id="yr"></span> MedStudy. Built for medicos ‚ù§Ô∏è</small>
    </div>
  </footer>

<section style="background: var(--card); border-radius: 14px; padding: 20px; margin: 20px 16px; box-shadow: var(--shadow); text-align: center;">
  <h2><i class="fa-solid fa-heart"></i> Support MedStudy</h2>
  <p>Your donation helps us maintain and improve this platform for all medicos.</p>
  <a href="upi://pay?pa=913078294521@ybl&pn=MedStudy&cu=INR" 
     style="display: inline-block; background: var(--secondary); color: white; padding: 12px 20px; border-radius: 8px; text-decoration: none; margin: 10px; font-weight: bold;">
    <i class="fa-solid fa-indian-rupee-sign"></i> Donate via UPI
  </a>
  <p style="font-size: 14px; color: var(--muted); margin-top: 10px;">
    UPI ID: YOUR_UPI_ID@upi
  </p>
</section>

<script>
/* ======= DATA ======= */
const driveDemoLink = "https://drive.google.com/file/d/1wP4uK_GA6rjg_4maZpmbDNSynhvZnCNo/view?usp=drive_link";
const DATA = {
  notes: {
    1: [
      { id:"anat", display:"Anatomy", link:driveDemoLink },
      { id:"biochem", display:"Biochemistry", link:driveDemoLink },
      { id:"physio", display:"Physiology", link:driveDemoLink }
    ],
    2: [
      { id:"pharma", display:"Pharmacology", link:driveDemoLink },
      { id:"micro", display:"Microbiology", link:"https://drive.google.com/file/d/1wcWU0VPzkqmitVRMsgM3crHKALuKsHB-/view?usp=share_link" },
      { id:"patho", display:"Pathology", link:"https://drive.google.com/file/d/1wd3Gktig0iTydsXb8JqlKawitIsy1_Py/view?usp=share_link" }
    ],
    3: [
      { id:"psm", display:"PSM", link:"https://drive.google.com/file/d/1wP4uK_GA6rjg_4maZpmbDNSynhvZnCNo/view?usp=drive_link" },
      { id:"psm2", display:"PSM2", link:"https://drive.google.com/file/d/1LtwDGeWLF357elmtbA-R_uujHqmM2jC_/view?usp=drive_link" },{ id:"fmt concise reddy", display:"fmt concise reddy", link:"https://drive.google.com/file/d/1wnqsdt0st5wy60zAg7DKZFeAl_vMgu4T/view?usp=share_link" },{ id:"fmt", display:"FMT", link:"https://drive.google.com/file/d/1BhySXMqZxcnLSccq-D0UB9-rGb1YIsN1/view?usp=drive_link" },
    ],
    4: [
      { id:"peds", display:"Pediatrics", link:"https://drive.google.com/file/d/1sNoc8qLR5VznT28MIrJ0CvCgW6OunF_v/view?usp=drive_link" },
      { id:"medicine", display:"Medicine1", link:"https://drive.google.com/file/d/1s9772ypXMudsLSdHn1xhtGcZCFFghYB0/view?usp=drive_link" },
      { id:"medicine-harrison", display:"Medicine -harrison's 21st edition", link:"https://drive.google.com/file/d/1BH30sXSQPr_jy4rgIKAV9j5i5xVyCJkP/view?usp=drive_link" }, { id:"surgery", display:"Surgery", link:driveDemoLink },
      { id:"obg", display:"Obs", link:"https://drive.google.com/file/d/1sGDp_vEo6VTip9rCyw61_izsupMznKMo/view?usp=drive_link" },
      { id:"gynae", display:"Gynae", link:"https://drive.google.com/file/d/1sAAwpNCqfbjB-d5GqImj50qZzUDopvtR/view?usp=drive_link" },{ id:"ent", display:"ENT", link:"https://drive.google.com/file/d/1rvgHxpzvE7v4Ed13UXBTaxn3GXljfccE/view?usp=drivesdk/view?usp=drive_link" },
      { id:"oph", display:"Ophthalmology", link:"https://drive.google.com/file/d/1vd7wg3HlQanVl8Nk-W90wJOyYRzunu0g/view?usp=drive_link" },
    ]
  },
  pyq: {
    1: [
      { id:"anat_pyq", display:"Anatomy", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }},
      { id:"biochem_pyq", display:"Biochemistry", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }},
      { id:"physio_pyq", display:"Physiology", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }}
    ],
    2: [
      { id:"pharma_pyq", display:"Pharmacology", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }},
      { id:"micro_pyq", display:"Microbiology", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }},
      { id:"patho_pyq", display:"Pathology", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }}
    ],
    3: [
      { id:"psm_pyq", display:"PSM", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"MUHS_PSM_PYQ's.pdf" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }},
      { id:"fmt_pyq", display:"FMT", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"MUHS_FMT_PYQ's.pdf" },
          2024: { summer:"LINK_HERE", winter:"https://drive.google.com/file/d/1ws2QOWEANKWJupZaCBFFs71Af_Xo5L9Q/view?usp=share_link" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }}
    ],
    4: [
      { id:"peds_pyq", display:"Pediatrics", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"image.jpeg", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }},
      { id:"medicine_pyq", display:"Medicine", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"med1winter2022.jpg" },
          2023: { summer:"summer med1 2023.jpg", winter:"Winter2023.pdf" },
          2024: { summer:"summer2024med1.jpg", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }},
      { id:"surgery_pyq", display:"Surgery", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"sur1 summer 23.jpg", winter:"win 2023sur1.jpg" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }},
      { id:"obg_pyq", display:"Obs & Gynae", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"Obs1sumeer2024.jpg", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }},
      { id:"ent_pyq", display:"ENT", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }},
      { id:"oph_pyq", display:"Ophthalmology", papers:{
        "Paper 1": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        },
        "Paper 2": {
          2022: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2023: { summer:"LINK_HERE", winter:"LINK_HERE" },
          2024: { summer:"LINK_HERE", winter:"LINK_HERE" }
        }
      }}
    ]
  }
};

const state = { tab: "notes", year: "1", search: "" };

/* ======= RENDER ======= */
const grid = document.getElementById("cardsGrid");
const countEl = document.getElementById("count");

function getSubjects(){
  const list = DATA[state.tab][state.year] || [];
  const term = state.search.trim().toLowerCase();
  return list.filter(s => s.display.toLowerCase().includes(term));
}

function render(){
  const list = getSubjects();
  grid.innerHTML = "";

  const card = document.createElement("div");
  card.className = "card";
  const yearNames = {1:"1st Year",2:"2nd Year",3:"3rd Year",4:"4th Year"};
  card.innerHTML = `<h3><i class="fa-solid fa-graduation-cap"></i> ${yearNames[state.year]} ‚Äì ${state.tab==="notes"?"Notes":"PYQ"}</h3>
                    <div class="sub-list"></div>`;
  const subList = card.querySelector(".sub-list");

  list.forEach(sub=>{
    const row = document.createElement("div");
    row.className = "sub";
    row.dataset.id = sub.id;
    row.innerHTML = `
      <div class="left">
        <span class="tag">Y${state.year}</span>
        ${state.tab==="notes" && sub.link ? 
          `<a href="${sub.link}" target="_blank" title="Open Drive link" style="margin-right:6px;">
            <i class="fa-brands fa-google-drive" style="color:#4285F4"></i>
          </a>` : ""}
        <strong>${sub.display}</strong>
      </div>
      <div class="acts">
        <button class="icon-btn view" title="Preview" data-act="view"><i class="fa-regular fa-eye"></i></button>
      </div>
    `;
    subList.appendChild(row);
  });

  if(list.length === 0){
    subList.innerHTML = `<p class="muted">No subjects found ‚ùó</p>`;
  }

  grid.appendChild(card);
  countEl.textContent = list.length;
}

/* ======= INTERACTION ======= */
document.querySelectorAll(".tab-btn").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    state.tab = btn.dataset.tab;
    render();
  });
});

document.querySelectorAll(".pill").forEach(p=>{
  p.addEventListener("click", ()=>{
    document.querySelectorAll(".pill").forEach(x=>x.classList.remove("active"));
    p.classList.add("active");
    state.year = p.dataset.year;
    render();
  });
});

const searchBox = document.getElementById("searchBox");
searchBox.addEventListener("input", (e)=>{ state.search = e.target.value; render(); });
document.getElementById("clearSearch").addEventListener("click", ()=>{ searchBox.value=""; state.search=""; render(); });

/* ======= CLICK HANDLER ======= */
grid.addEventListener("click", (e)=>{
  const target = e.target.closest("[data-act]");
  if(!target) return;
  const row = e.target.closest(".sub");
  if(!row) return;

  const subjectList = DATA[state.tab][state.year] || [];
  const subject = subjectList.find(s => s.id === row.dataset.id);

  if(target.dataset.act==="view" && subject){
    if(state.tab === "notes" && subject.link){
      openModal(subject.display + " - Resource", `
        <p>
          <a href="${subject.link}" target="_blank" rel="noopener" style="font-weight:bold;color:#2a5c8f;">
            &#128196; View/Download Resource (Google Drive)
          </a>
        </p>
      `);
      return;
    }

    // PYQ modal rendering
    if(state.tab === "pyq" && subject.papers){
      let html = `<div style="margin-top:6px;">`;
      for(const paperName of Object.keys(subject.papers)){
        html += `<div class="pyq-paper"><strong>${paperName}</strong>`;
        const yearsObj = subject.papers[paperName];
        for(const yr of Object.keys(yearsObj)){
          const sets = yearsObj[yr];
          html += `<div class="pyq-year"><span style="min-width:60px;font-weight:700">${yr}</span>`;
          // Summer
          if(sets && sets.summer && sets.summer !== "LINK_HERE"){
            html += `<a class="btn-link btn-summer" href="${sets.summer}" target="_blank" rel="noopener">Summer</a>`;
          } else {
            html += `<span class="btn-disabled">Summer ‚Äî</span>`;
          }
          // Winter
          if(sets && sets.winter && sets.winter !== "LINK_HERE"){
            html += `<a class="btn-link btn-winter" href="${sets.winter}" target="_blank" rel="noopener">Winter</a>`;
          } else {
            html += `<span class="btn-disabled">Winter ‚Äî</span>`;
          }
          html += `</div>`;
        }
        html += `</div>`; // .pyq-paper
      }
      html += `</div>`;

      openModal(subject.display + " - PYQs", html);
      return;
    }

    // fallback
    openModal("Preview", `<p class="muted">No data available for <b>${row.dataset.id}</b>.</p>`);
  }
});

/* ======= MODAL ======= */
const modal = document.getElementById("modal");
const modalTitle = document.getElementById("modalTitle");
const modalBody  = document.getElementById("modalBody");
document.getElementById("modalClose").addEventListener("click", ()=> modal.classList.remove("show"));
modal.addEventListener("click", (e)=> {
  if(e.target === modal) modal.classList.remove("show"); // click outside dialog closes
});
function openModal(title, html){
  modalTitle.textContent = title;
  modalBody.innerHTML = html;
  modal.classList.add("show");
}

/* ======= INIT ======= */
(function init(){
  render();
  document.getElementById("yr").textContent = new Date().getFullYear();
})();
</script>
</body>

</html>
